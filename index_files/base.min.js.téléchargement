if(typeof fg!="object")var fg={};if(typeof fg.base!="object")fg.base={};fg.base.namespace=function(nsString){var parts=nsString.split("."),parent=fg,i;if(parts[0]==="fg"){parts=parts.slice(1)}for(i=0;i<parts.length;i+=1){if(typeof parent[parts[i]]==="undefined"){parent[parts[i]]={}}parent=parent[parts[i]]}return parent};fg.base.namespace("fg.base");fg.base.parameters=function(window,$,_){function mergeParams(defaultParams,newParams){return $.extend(defaultParams,newParams)}return{init:mergeParams}}(window,jQuery,_);fg.base.namespace("fg.base");fg.base.observer=function(window,$){var debug=false;var o=$({});function subscribe(){if(debug)console.log("observer.subscribe",arguments);if(!isEventAlreadyHandled(arguments)){o.on.apply(o,arguments)}else{if(debug)console.log("observer.subscribe - already exist",arguments)}}function unsubscribe(){if(debug)console.log("observer.unsubscribe",arguments);o.off.apply(o,arguments)}function publish(){if(debug)console.log("observer.publish",arguments);o.trigger.apply(o,arguments)}function getAllEvents(){return $._data(o[0],"events")}function isEventAlreadyHandled(){var newEvent=arguments[0];var newEventPath=newEvent[0];var events=getAllEvents();var eventsPath=_.keys(events);if(_.find(eventsPath,function(name){return name==newEventPath})){var events=events[newEventPath];var newEventHandler=newEvent[1].toString();if(_.find(events,function(e){return e.handler.toString()==newEventHandler})){return true}else{return false}}else{return false}}var out={subscribe:subscribe,unsubscribe:unsubscribe,publish:publish};if(debug){out.getAllEvents=getAllEvents}return out}(window,jQuery);fg.base.namespace("fg.base");fg.base.message=function(window,$,_,fg){var isEnabled=true;function logError(code,message,args){displayInConsole("err["+code+"] "+message,args)}function displayInConsole(message,args){if(typeof console!=="undefined"&&console.log){console.log(message,args)}}function catchError(e,data){console.log(data);params=fg.base.parameters.init({code:"",message:"no message",params:{}},data);logError(params.code,params.message,params.params)}function init(){fg.base.observer.subscribe("/error",catchError)}init();return{error:logError}}(window,jQuery,_,fg);fg.base.namespace("fg.base");fg.base.init=function(window,$,_,fg){var pageIsInitiated=false;function start(){$(document).ready(function(){if(!pageIsInitiated){triggerGlobalStart();triggerPageStart();pageIsInitiated=true}});return fg.base.init}function triggerGlobalStart(){fg.base.observer.publish("/start")}function triggerPageStart(){_.each(getPageNames(),function(value,key,list){if(!_.isEmpty(value)){fg.base.observer.publish("/start/"+value)}})}function getPageNames(){var pageNames=$("body").data("page");if(_.isString(pageNames)&&!_.isEmpty(pageNames)){return pageNames.split(".")}else{return[]}}return{start:start}}(window,jQuery,_,fg);fg.base.init.start();fg.base.namespace("fg.base");fg.base.xhr=function(window,$,fg){function validate(response){var that=this;var statusSuccess,statusFail,statusRedirect,statusException=false;function __construct(){if(typeof response.status=="undefined"||response.status==false&&typeof response.errorType=="undefined"){triggerException("XHR json response malformed")}else if(response.status==false&&response.errorType=="exception"){triggerException()}else if(response.status==false&&response.errorType=="redirect"){triggerRedirect()}else if(response.status==false&&response.errorType=="fail"){statusFail=true}else if(response.status==true){statusSuccess=true}else{triggerException("XHR json response invalid")}return that}function triggerRedirect(){statusRedirect=true;fg.base.observer.publish("/error/redirect",[{url:that.getRedirectUrl(),context:that.getContext()}]);return that}function triggerException(message){message=message||that.getExceptionMessage();statusException=true;fg.base.observer.publish("/error/exception/xhr",[{message:message,code:that.getExceptionCode(),context:that.getContext(),data:response}]);return that}this.getData=function getData(){if(typeof response.data!="undefined")return response.data;else return null};this.getRedirectUrl=function getRedirectUrl(){if(typeof response.data!="undefined"||typeof response.data.url!="undefined")return response.data.url;else return null};this.getExceptionMessage=function getExceptionMessage(){if(typeof response.data!="undefined"||typeof response.data.message!="undefined")return response.data.message;else return null};this.getExceptionCode=function getExceptionCode(){if(typeof response.data!="undefined"||typeof response.data.code!="undefined")return response.data.code;else return null};this.getContext=function getContext(){if(typeof response.context!="undefined"||response.context!="")return response.context;else return null};this.isStatusSuccess=function isStatusSuccess(){return statusSuccess};this.isStatusFail=function isStatusFail(){return statusFail};this.isStatusRedirect=function isStatusRedirect(){return statusRedirect};this.isStatusException=function isStatusException(){return statusException};__construct()}return{validate:validate}}(window,jQuery,fg);fg.base.namespace("fg.base");fg.base.gesture=function(window,$,_,fg){function bindSwipe($el,callback){var startX=0;var startY=0;var endX=0;var endY=0;var diffMinX=120;var diffMaxY=50;var validSwipeX=!1;var validSwipeBottomY=!1;var validSwipeTopY=!1;var direction="";$el.on("touchstart",function(e){var t=e.originalEvent.touches[0];startX=t.screenX,startY=t.screenY,endX=t.screenX,endY=t.screenY}),$el.on("touchmove",function(e){var t=e.originalEvent.touches[0];endX=t.screenX,endY=t.screenY}),$el.on("touchend",function(){validSwipeX=endX-diffMinX>startX||endX+diffMinX<startX;validSwipeBottomY=startY<=endY&&endY<startY+diffMaxY&&startY>endY-diffMaxY;validSwipeTopY=startY>=endY&&endY>startY-diffMaxY&&startY<endY+diffMaxY;validSwipeX&&(validSwipeBottomY||validSwipeTopY)?(direction=endX>startX?"right":"left",callback(direction)):direction="swipe no valid"})}return{bindSwipe:bindSwipe}}(window,jQuery,_,fg);
//# sourceMappingURL=build/static/compiled/js/base.min.js.map