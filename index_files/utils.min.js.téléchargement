var FG=FG||{};if($.extend(!0,FG,{Utils:{}}),$.typeOf=function(e){if(0===e||1===e)return"number";var t=!!e&&Object.prototype.toString.call(e).match(/(\w+)\]/)[1];return"boolean"==typeof t?t:t.toLowerCase()},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,i=Number(arguments[1])||0;for(i=i<0?Math.ceil(i):Math.floor(i),i<0&&(i+=t);i<t;i++)if(i in this&&this[i]===e)return i;return-1}),!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var t=[];for(var i in e)owns(e,i)&&t.push(i);if(hasDontEnumBug)for(var n=0,a=dontEnumsLength;n<a;n++){var s=dontEnums[n];owns(e,s)&&t.push(s)}return t}}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},a=function(){return i.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,a.prototype=new n,a}),FG.Utils.TriggerFnArray=function(){fnArray.length>0&&($.each(fnArray,function(e,t){"function"==typeof t&&t()}),fnArray=[])},FG.Utils.Decode=function(e){if(void 0===e||""==e)return"";var t,i,n,a,s,o,r,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="",c=0;if(e=e.replace(/-/g,"+").replace(/_/g,"=").replace(/\./g,"/"),e.match("/[^A-Za-z0-9+\\/=]/"))return"";do{a=l.indexOf(e.charAt(c++)),s=l.indexOf(e.charAt(c++)),o=l.indexOf(e.charAt(c++)),r=l.indexOf(e.charAt(c++)),t=a<<2|s>>4,i=(15&s)<<4|o>>2,n=(3&o)<<6|r,d+=String.fromCharCode(t),64!=o&&(d+=String.fromCharCode(i)),64!=r&&(d+=String.fromCharCode(n)),t=i=n=a=s=o=r=""}while(c<e.length);return d=d.replace(/&amp;/gi,"&")},FG.Utils.AdManager={params:{list:"ul",node:"li",iteration:0,report:{},intervalFn:null,timeout:null},init:function(e){if(!("array"!==$.typeOf(e.ads)||1>e.ads.length)){var t=this,i=$.extend(!0,t.params,e);i.cAds=i.ads.length,i.interval-=500,t.build(1,function(){t.gotoStep(0),1<i.cAds&&(i.intervalFn=setInterval(function(){return t.gotoStep()},i.interval))}),1<i.cAds?(i.adPager.find("li").on("mouseenter",function(){"null"!==$.typeOf(i.timeout)&&clearTimeout(i.timeout);var e=$(this),n=e.index();0>n||(t.stop(),i.timeout=setTimeout(function(){return t.gotoStep(n)},300))}).on("mouseleave",function(){"null"!==$.typeOf(i.timeout)&&clearTimeout(i.timeout)}),i.adContainer.on("mouseenter",function(){return t.stop()})):i.adPager.hide(),FG.env.host===FG.env.sites.fm&&$(window).bind("unload",function(){t.doReport()})}},build:function(e,t){var i,n=this,a=n.params,s=$("<"+a.list+"/>"),o=$("<"+a.node+"/>"),r=$("<ul/>"),l=[];if($.each(a.ads,function(t,d){1<a.cAds&&r.append($("<li />").append($("<span />").addClass("picto").text(parseInt(t+1,10)))),i=o.clone(),s.append(i),"number"===$.typeOf(e)&&t>=e||n.drawAd(d,i,l)}),l.push(t),a.adContainer.addClass("line").append(s.html()).removeClass("hidden"),1<a.cAds){parseInt(20*a.cAds,10);a.adPager.addClass("inline").append(r.html()).children().filter(":eq("+a.step+")").addClass("is-active").end().end().removeClass("hidden").animate({opacity:1},2e3)}$.each(l,function(e,t){"function"===$.typeOf(t)&&t()})},drawAd:function(e,t,i){if(void 0===e||"string"!=typeof e.extension)return!1;var n=this.params;if($.inArray(e,n.ads)<0)return!1;var a=e.extension.toLowerCase(),s="";switch(void 0!==e.date_modification&&0!=e.date_modification&&(s="?"+e.date_modification),a){case".swf":t.append($("<div />").attr({id:"pubContent_"+e.id}).css({width:e.width+"px",height:e.height+"px"})),e.lien.length>0&&t.append($("<a />").addClass("blank").attr({href:e.lien,target:"_blank"}).append($("<img />").attr("src",FG.env.ROOT_URL_STATIC+"/img/common/blank.gif"))),i.push(function(){swfobject.embedSWF(FG.env.ROOT_URL_MEDIA+"/publicites/"+e.id+".swf"+s,"pubContent_"+e.id,e.width,e.height,"9.0.0",null,null,{wmode:"transparent",scale:"exactfit"})});break;case".jpg":case".jpeg":case".gif":case".png":if(n.adContainer.removeClass("shadow"),e.lien.length>0)var o=$("<a />").attr({href:e.lien,target:"_blank"});else var o=$("<a />").attr({href:"#"}).css("cursor","default");$("<img />").on("load",function(){t.append(o.append($(this).fadeIn("fast"))),n.adContainer.addClass("shadow")}).attr({width:e.width,height:e.height}).attr("src",FG.env.ROOT_URL_MEDIA+"/publicites/"+e.id+e.extension+s);break;default:var r=$(e.html)[0];if(void 0===r)return!1;var l=$(r);if(e.lien.length>0)var o=$('<a class="blank" />').attr({href:e.lien,target:"_blank"});if("object"===$.typeOf(l)&&"script"===r.nodeName.toLowerCase()){if(!1!==$.typeOf(l.attr("src "))||""===l.attr("src"))return!1;$('<iframe frameBorder="0" scrolling="no" />').css({width:e.width,height:e.height,overflow:"hidden"}).attr({src:FG.env.host+"publicite/smartads.php?adSrc="+encodeURI(l.attr("src"))}).appendTo(t),e.lien.length>0&&t.append(o)}else t.append($("<div />").html(l))}"1"===e.bordure&&t.children("a").addClass("bordered")},gotoStep:function(e){var t=this,i=t.params,n=[];if("number"===$.typeOf(i.intervalFn)){if(i.iteration>=2)return void t.stop();i.iteration++}"number"!==$.typeOf(e)?++i.step>=i.cAds&&(i.step=0):i.step=e;var a=parseInt($("#ads").width(),10);i.adContainer.css({left:"-"+parseInt(a*i.step,10)+"px"});var s=i.adContainer.children("li:eq("+i.step+")");s.is(":empty")&&(t.drawAd(i.ads[i.step],s,n),$.each(n,function(e,t){"function"===$.typeOf(t)&&t()})),i.adPager.children().removeAttr("class").filter(":eq("+i.step+")").addClass("is-active"),this.addView()},stop:function(){var e=this.params;"null"!==$.typeOf(e.intervalFn)&&(clearInterval(e.intervalFn),e.intervalFn=null)},addView:function(){var e=this.params;void 0===e.report[e.step]?e.report[e.step]={id_unique:e.ads[e.step].id_pub_calendrier,views:1}:e.report[e.step].views++},doReport:function(){var e=this.params;$.ajax({type:"POST",url:FG.env.host+"pub/addView/",async:!1,dataType:"JSON",data:{tabPub:e.report}})}},FG.Utils.Loader={params:{node:$('<div class="utils-loader" />').append('<img src="'+FG.env.ROOT_URL_STATIC+'/img/jquery/ajax-loader.gif" />')},show:function(e){var t=this,i=$("body");head.ready("jQueryUI",function(){t.params.node.css({padding:"15px 12px","text-align":"center"}).dialog({modal:!e,height:65,dialogClass:"dialog-loader",resizable:!1,draggable:!1,open:function(){e||i.addClass("overlaid")},close:function(){i.removeClass("overlaid")}}).dialog("widget").find(".ui-dialog-titlebar").hide()})},hide:function(){head.ready("jQueryUI",function(){var e=$(".utils-loader");e.is(".u-content")&&e.dialog("destroy"),$("body").removeClass("overlaid"),e.remove()})}},FG.Utils.dynSelects={params:{ajax:null,selects:[],hideSelector:".hidden, .is--hidden, tr, li, .js-form-group",showLoader:!0},init:function(e){var t;t=!1!==$.typeOf(e)?$.extend(!0,this.params,e):this.params,$.each(t.selects,function(e,i){var n=i.handler;n.on("change",function(){t.showLoader&&FG.Utils.Loader.show();var a=[],s=t.selects[e+1];if(!1===$.typeOf(s)||!1===$.typeOf(s.handler.attr("inactive"))||"true"!==s.handler.attr("inactive"))if($.each(t.selects,function(e){if(0===e)return!0;a.push(this.handler)}),a.length>e){n.siblings(".loader-mini").length>0&&n.siblings(".loader-mini").css("display","inline-block");var o=$.extend(!0,i.ajaxData,{idRef:$.trim(n.val())});!1===$.typeOf(n.val())?FG.Utils.Loader.hide():$.ajax({type:t.ajax.type,dataType:t.ajax.dataType,url:!1!==$.typeOf(i.ajax)?i.ajax.url:t.ajax.url,data:o}).success(function(o){if(n.siblings(".loader-mini").length>0&&n.siblings(".loader-mini").hide(),!1===o){var r;for(r=e;r<a.length;r++)(!1===$.typeOf(t.ajax.hideOnFalse)||t.ajax.hideOnFalse)&&a[r].empty().closest(".hidden, .is--hidden, tr, li, .js-form-group").hide(),"function"===$.typeOf(t.selects[r].callback)&&(t.selects[r].callback(o),FG.Utils.Tip.updatePositions());return void FG.Utils.Loader.hide()}if("number"!==$.typeOf(i.handler.val())||i.handler.val()>0){var l=$(a[e]);!1!==$.typeOf(l)?(l.children().remove(),$.each(o,function(e,t){l.append('<option value="'+parseFloat(t.id)+'">'+t.label+"</option>")}),l.closest(".hidden, .is--hidden, tr, li, .js-form-group").show().removeClass("hidden is--hidden")):"boolean"===$.typeOf(t.ajax.hideOnFalse)&&t.ajax.hideOnFalse&&l.closest(".hidden, .is--hidden, tr, li, .js-form-group").hide().removeClass("hidden is--hidden").fadeIn("fast")}"function"===$.typeOf(t.selects[e].callback)&&(t.selects[e].callback(o),FG.Utils.Tip.updatePositions()),("number"!==$.typeOf(i.handler.val())||i.handler.val()>0)&&!1!==$.typeOf(s)&&("number"!==$.typeOf(s.handler.val())||s.handler.val()>0)&&s.handler.trigger("change"),FG.Utils.Loader.hide()}).fail(function(){"function"===$.typeOf(t.selects[e].fail)&&(t.selects[e].fail(),FG.Utils.Tip.updatePositions()),FG.Utils.Loader.hide()})}else FG.Utils.Loader.hide()})}),void 0!==t.selects[1]&&("number"!==$.typeOf(t.selects[0].handler.val())||t.selects[0].handler.val()>0)&&t.selects[0].handler.trigger("change");var i=$.extend(!0,{},this);return this.params={},i}},$.fn.dynSelects=function(e){var t=new Object(FG.Utils.dynSelects);return"object"!==$.typeOf(e)||$.isEmptyObject(e)||$.each(e,function(e,i){t.params[e]=i}),t.init()},FG.Utils.FormValidation={params:{errorClass:"inputTextWarning",filters:{email:/^([\w\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w\-]+\.)+))([\w\-]+)(\]?)$/,filetypes:/(\.doc|\.docx|\.txt|\.rtf|\.pdf|\.jpg|\.jpeg|\.png|\.gif)$/i,url:/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},scrollAfterCheck:!0,errors:{fields:[],_fields:[]}},init:function(e){var t=this,i=$.extend(!0,t.params,e);return void 0===i.form?(alert("Error : Unreachable form (code:ERR-FV01)."),!1):(i.errors.fields=[],i.errors._fields=[],t.checkIsValidEmail(),t.checkIsValidUrl(),t.checkPassword(),t.checkRequired(),t.checkSimilar(),t.checkMinLength(),t.checkFiletype(),!(i.errors.fields.length>0)||t.errorsTreatment())},checkSimilar:function(){var e=this.params;e.form.find("input[data-similarto]:visible").each(function(t,i){var n=$(i),a={node:n,msg:FG.trad.pass_confirm_different},s=$("#"+n.data("similarto"));if(s.length>0&&n.val()!==s.val()){var o=$.inArray(n.attr("id"),e.errors._fields);o>=0&&(e.errors.fields.splice(o,1),e.errors._fields.splice(o,1)),e.errors.fields.push(a),e.errors._fields.push(n.attr("id"))}})},checkPassword:function(){var e=this.params;e.form.find("input[type=password]:visible").each(function(t,i){var n=$(i),a={node:n,msg:FG.trad.mauvais_pass};"******"===n.val()&&$.inArray(n.attr("id"),e.errors._fields)<0&&(e.errors.fields.push(a),e.errors._fields.push(n.attr("id")))})},checkRequired:function(){var e=this.params,t=e.form.find("[data-required], .required").find("input, select, textarea").filter(":visible");_simFields=e.form.find("[data-simulereq]").find("input"),$.each(_simFields,function(t,i){var n=$(i);if(void 0===n.closest(".js-form-group").find("[data-filetype]").html()){var a={node:n,msg:FG.trad.required_field};e.errors.fields.push(a),e.errors._fields.push(n.attr("id"))}}),t.length<1||$.each(t,function(i,n){var a=$(n);if(!(a.is(".chzn-done")&&!a.parent().is(":visible")||a.parent().is(".chzn-search")||a.is('[name="complement"]'))){var s={node:a,msg:FG.trad.required_field},o=a.attr("name"),r=a.val();if("string"===$.typeOf(r)&&(r=$.trim(r)),a.is(":radio, :checkbox")){if(0<e.form.find('input[name="'+o+'"]:checked').length)return;return e.errors.fields.push(s),e.errors._fields.push(a.attr("id")),void e.form.find('input[name="'+o+'"]').not(a).each(function(){t.splice($.inArray(this,t),1)})}if(!(a.is("[multiple]")&&a.children().length>0)){if(a.is(".select2-focusser")){var l=a.closest(".select--wrapper").find("input.js-select-flag");r=l.val(),s={node:l,msg:FG.trad.required_field}}(""===r||null===r||r<0)&&(e.errors.fields.push(s),e.errors._fields.push(a.attr("id")))}}})},checkIsValidEmail:function(){var e=this.params;e.form.find('[type="email"], [name="email"], input.email').filter(":visible").each(function(t,i){var n=$(i),a={node:n,msg:FG.trad.email_invalide},s=n.val();""!==s&&!e.filters.email.test($.trim(s))&&$.inArray(n.attr("id"),e.errors._fields)<0&&(e.errors.fields.push(a),e.errors._fields.push(n.attr("id")))})},checkIsValidUrl:function(){var e=this.params;e.form.find('[type="url"], [name="url"], input.url').filter(":visible").each(function(t,i){var n=$(i),a={node:n,msg:FG.trad.url_invalide},s=n.val();""!==s&&!e.filters.url.test($.trim(s))&&$.inArray(n.attr("id"),e.errors._fields)<0&&(e.errors.fields.push(a),e.errors._fields.push(n.attr("id")))})},checkMinLength:function(){var e=this,t=e.params;t.form.find("[data-minlength]").filter(":visible").each(function(){var e=$(this),i={node:e};e.val().length<e.data("minlength")&&$.inArray(e.attr("id"),t.errors._fields)<0&&(t.errors.fields.push(i),t.errors._fields.push(e.attr("id")))})},checkFiletype:function(){var e=this,t=e.params;t.form.find('[type="file"]:visible').each(function(){var e=$(this),i={node:e,msg:!1!==$.typeOf(e.data("error"))?e.data("error"):FG.trad.cv_wrong_format};""!==e.val()&&(t.filters.filetypes.test(e.val())||(t.errors.fields.push(i),t.errors._fields.push(e.attr("id"))))})},errorsTreatment:function(){var e=this,t=e.params;if(t.errors.fields.length>0){if($.each(t.errors.fields,function(e,t){var i=t.node;if(t.node.closest("span").length>0&&(i=t.node.closest("span")),void 0!==t.msg||void 0!==i.data("error")){var n;n=i.is('.chzn-done, [type="file"], span')?"mouseenter":i.is('[type="radio"], [type="checkbox"], [type="textarea"], [type="select"]')?"change":"focus",i.is(".check-list__checkbox")?i.closest("ul").addClass("inputTextWarning").showTip({content:!1!==$.typeOf(i.data("error"))?i.data("error"):t.msg,relativeTo:!1!==$.typeOf(i.data("relativeto"))?i.data("relativeto"):null,closeTrigger:n,closeCallback:function(){i.removeClass("inputTextWarning")},className:"error"}):i.addClass("inputTextWarning").showTip({content:!1!==$.typeOf(i.data("error"))?i.data("error"):t.msg,relativeTo:!1!==$.typeOf(i.data("relativeto"))?i.data("relativeto"):null,closeTrigger:n,closeCallback:function(){i.removeClass("inputTextWarning")},className:"error"})}}),$(".inputTextWarning").on("focus keyup change",function(){(""!=$(this).val()||$(this).is(".check-list"))&&$(this).removeClass("inputTextWarning")}),t.scrollAfterCheck){var i,n=$(t.errors.fields[0].node),a=n.offset().top;$.map([n.closest(".scrollable"),$(".layout")],function(e){return e.get()});i=n.closest(".scrollable").length>0?n.closest(".scrollable").first():$("html, body"),i.is(".scrollable")&&(a+=i.scrollTop()),i.animate({scrollTop:a-120},500,function(){FG.Utils.Tip.update(),FG.Utils.Tip.updatePositions(),$(this).on("scroll.updateTip",function(){FG.Utils.Tip.update(),FG.Utils.Tip.updatePositions()})})}return FG.Utils.Loader.hide(),!1}return!0}},$.fn.formValidate=function(e){var t=new Object(FG.Utils.FormValidation);return t.params.form=$(this),"object"===$.typeOf(e)&&e.length>0&&$.each(e,function(e,i){"form"!==e&&(t.params[e]=i)}),t.init()},FG.Utils.Tip={params:{event:null,content:null,relativeTo:null,closeTrigger:"mouseleave",closeCallback:null,className:null,timeout:null},open:function(){var e=this,t=e.params;null!==t.content&&("number"===$.typeOf(e.params.timeout)&&(clearTimeout(e.params.timeout),delete e.params.timeout),e.params.timeout=setTimeout(function(){var i,n=null!==t.className?t.className:"tip",a=$("."+n).filter(function(){return e.relativeTo.is($(this).data("for"))});if(a.length>0)a.fadeIn(),e.updatePositions();else{var i=$("<div />");i.addClass(n).data("for",e.relativeTo).data("relativeto",e.relativeTo).append('<div class="msg text--danger">'+t.content+"</div>").appendTo(e.relativeTo.closest(".form__item")),"function"==typeof t.closeCallback&&i.data("onclose",t.closeCallback),i.on("mouseleave",function(){var e=$(this);e.is(".tip-error")||("function"==typeof e.data("onclose")&&e.data("onclose")(),e.fadeOut("fast").remove())}),e.updatePositions()}},200),e.bindEvents())},getRelativeOffset:function(e,t){var i=this,t=!1!==$.typeOf(t)?t:i.relativeTo,n=t.offset();return t.is(".zoomBox")?{top:n.top+t.outerHeight()/8,left:n.left+t.outerWidth()+2-t.outerWidth()/8}:{top:n.top+t.outerHeight()/2-e.outerHeight()/2,left:n.left+t.outerWidth()+2}},bindEvents:function(){var e=this,t=e.params;null!==t.className&&t.className;null!==e.event&&e.elem.is("figure, img, [class^='picto'], .layer")&&e.elem.off("mouseenter.tip").on("mousemove.tip",function(t){e.updatePositions()}),e.relativeTo.off(t.closeTrigger+".closetip").on(t.closeTrigger+".closetip",function(){var t=$('[class*="tip"]').filter(function(){return e.relativeTo.is($(this).data("for"))});$(this).off("mousemove.tip"),"number"===$.typeOf(e.params.timeout)&&(clearTimeout(e.params.timeout),delete e.params.timeout),t.length>0&&(t.fadeOut("fast"),t.is(".tip-error")&&t.remove(),"function"==typeof t.data("onclose")&&t.data("onclose")())}).blur(function(){e.updatePositions()})},update:function(){var e=$.merge($(".scrollable"),$("body")).first();$('[class^="tip"]').each(function(){var t=$(this),i=t.data("for");i.is(".js-select-flag")&&(i=i.closest("div")),void 0===t.data("for")||i.is(":not(:visible)")||i.offset().top>e.height()||i.offset().top<e.offset().top?(t.hide(),"function"==typeof t.data("onclose")&&t.data("onclose")()):t.fadeIn("fast")})},updatePositions:function(){var e=this;e.params;$('[class^="tip"]').each(function(){var t=$(this),i=t.data("relativeto");t.css(e.getRelativeOffset(t,i))})}},$("body").on("mouseenter.tip","[data-tip]",function(e){var t=$(this);t.showTip({event:e,content:t.data("tip")})}),$.fn.showTip=function(e){var t=$(this),i=$('[class*="tip"]').filter(function(){return t.is($(this).data("for"))});e.className="tip"+(void 0!==e.className?"-"+e.className:""),i.length>0&&i.fadeOut("fast");var n=new Object(FG.Utils.Tip);n.elem=t,!1!==$.typeOf(e.relativeTo)?(n.relativeTo=$(e.relativeTo),delete e.relativeTo):n.relativeTo=t,!1!==$.typeOf(e.event)?n.event=e.event:n.event=null,$.each(e,function(e,t){n.params[e]=t}),n.open()},FG.Utils.Dialog={params:{ui:{title:null,modal:!0,resizable:!1,draggable:!1,noButton:!1,noButtonOk:!1,scrollable:!1,buttons:{Ok:function(){$(this).dialog("close")}},dialogClass:""},html:null},open:function(e){var t=$.extend(!0,this.params,e),i=$("<div/>");return 1==this.params.ui.noButton&&(t.ui.buttons={}),1==this.params.ui.noButtonOk&&void 0!==this.params.ui.buttons.Ok&&delete this.params.ui.buttons.Ok,this.params.ui.open=function(){0==t.ui.scrollable&&$("body").addClass("overlaid"),$(this).find("a, input, button").blur(),"function"==typeof t.ui.triggerOpen&&t.ui.triggerOpen()},this.params.ui.close=function(){"function"==typeof t.ui.triggerClose&&t.ui.triggerClose(),$("body").removeClass("overlaid"),$(this).dialog("destroy").remove()},head.ready("jQueryUI",function(){i.html(t.html).dialog(t.ui)}),i}},FG.Utils.AjaxLogin={listen:function(e){var t=null;$("body").on("submit",".ajax-login-form",function(e){e.preventDefault(),e.stopPropagation(),FG.Utils.Loader.show();var t=$(this),i={_token:FG.globals.token,login:t.find("input[name=login]").val(),pass:t.find("input[name=pass]").last().val()};t.formValidate({scrollAfterCheck:!1})&&$.ajax({type:"POST",url:FG.env.host+"login/logInAjax/",dataType:"JSON",data:i,success:function(e){if(null===e||1===e.error)FG.Utils.Loader.hide(),t.siblings(".alert").length<1&&t.after($("<div />").addClass("alert txt-center").html(FG.trad.mauvais_email_pass));else{var n,a=t.find("[name=link]");if(a.length>0&&""!==a.first().val()){var s=$.trim(a.first().val());n=function(){$(location).attr("href",s)}}else n=void 0!==e.link&&""!==e.link?function(){$(location).attr("href",e.link)}:function(){location.reload()};if(void 0!==e.pass){var o=function(){return FG.Utils.Loader.hide(),FG.Utils.Dialog.open({ui:{title:FG.trad.erreur_survenue,dialogClass:"dialog-error"},html:FG.trad.erreur_survenue})};$("<img />").bind("error",function(){return o()}).attr("src",FG.env.sites.fg+"login/sso/?login="+i.login+"&pass="+e.pass).load(function(){$("<img />").bind("error",function(){return o()}).attr("src",FG.env.sites.fm+"login/sso/?login="+i.login+"&pass="+e.pass).load(function(){$("<img />").bind("error",function(){return o()}).attr("src",FG.env.sites.fj+"login/sso/?login="+i.login+"&pass="+e.pass).load(function(){n()})})})}}},error:function(){return FG.Utils.Loader.hide(),alert("An unexpected server error has been thrown. Please try again later."),!1}})}).on("click",".getLostPassword",function(e){e.preventDefault();var i={};$(this).data("email")&&(i.email=$(this).data("email")),$.get("/login/getLostPassword/",i,function(e){t=FG.Utils.Dialog.open({ui:{title:FG.trad.information,noButton:!0,width:500,triggerOpen:function(){$(".token").val(FG.globals.token)},dialogClass:""},html:e})})}).on("submit","#lostPassword",function(e){e.preventDefault(),head.js(FG.env.ROOT_URL_STATIC+"/js/jquery/jquery.form"+FG.env.suffix_JS+".js",function(){var e=$("#lostPassword input.email");$("#lostPassword").ajaxSubmit({url:"/login/recoverPassword/",type:"POST",dataType:"JSON",beforeSerialize:function(t,i){e.val(e.val().toLowerCase().replace(/ /g,""))},beforeSubmit:function(e,t,i){return FG.Utils.Loader.show(),t.formValidate({scrollAfterCheck:!1})},success:function(i){FG.Utils.Loader.hide(),FG.Utils.Tools.AJAXReturn(i)&&!1!==i&&0!==i.length&&(null!==t&&t.dialog("destroy").remove(),FG.Utils.Dialog.open({ui:{title:FG.trad.information,noButton:!0,dialogClass:"",triggerClose:function(){null===t&&history.back(-1)}},html:FG.trad.pass_envoyer_ok+" "+e.val()}))}})})})},loadImages:function(e,t,i){var n=function(){return FG.Utils.Loader.hide(),FG.Utils.Dialog.open({ui:{title:FG.trad.erreur_survenue,dialogClass:"dialog-error"},html:FG.trad.erreur_survenue})};$("<img />").bind("error",function(){return n()}).attr("src",FG.env.sites.fg+"login/sso/?login="+e+"&pass="+t).load(function(){$("<img />").bind("error",function(){return n()}).attr("src",FG.env.sites.fm+"login/sso/?login="+e+"&pass="+t).load(function(){$("<img />").bind("error",function(){return n()}).attr("src",FG.env.sites.fj+"login/sso/?login="+e+"&pass="+t).load(function(){"function"==typeof i&&i()})})})}},"undefined"!=typeof head&&head.ready("utils",function(){FG.Utils.AjaxLogin.listen(),$("body").on("click.logout",".logout-ajax",function(e){e.preventDefault(),FG.Utils.Loader.show();var t=function(){return FG.Utils.Loader.hide(),FG.Utils.Dialog.open({ui:{title:FG.trad.erreur_survenue,dialogClass:"dialog-error"},html:FG.trad.erreur_survenue})};$("<img />").bind("error",function(){return t()}).attr("src",FG.env.sites.fg+"login/ssout/").load(function(){$("<img />").bind("error",function(){return t()}).attr("src",FG.env.sites.fm+"login/ssout/").load(function(){$("<img />").bind("error",function(){return t()}).attr("src",FG.env.sites.fj+"login/ssout/").load(function(){location.reload()})})})})}),FG.Utils.chooseCompanyOrSchool={params:{selects:$("#register_societe, #register_ecole"),selectedSelect:null,typingTimeout:null,chosenParent:null,chosenInput:null,searchTerm:null,situation:null,type:1,typeCompany:null,inputs:{"-1":["soc_lieu","soc_pays","soc_adresse","soc_cp","soc_ville","etabl_pays","etabl_adresse","etabl_cp","etabl_ville"],0:["nom_etabl","etabl_internet","etabl_pays","etabl_adresse","etabl_cp","etabl_ville"],1:["soc_societe","soc_secteur","soc_internet","soc_secteur","soc_lieu","soc_pays","soc_adresse","soc_cp","soc_ville","soc_taille"],2:["soc_societe","soc_internet","soc_pays","soc_adresse","soc_cp","soc_ville"],3:["soc_societe","soc_internet","soc_pays","soc_adresse","soc_cp","soc_ville"]}},init:function(e){var t=this,i=$.extend(!0,t.params,e);i.selects.off("change.register").on("change.register",function(){t.showAdresses()}).trigger("liszt:updated"),$("#register_soc_type_activite").on("change.register",function(){i.type=$(this).val(),$(".adress-list").fadeOut(),$("[name=societe_id_marque]").empty(),$("#register_societe").empty().trigger("liszt:updated")}),$(".adress-list").on("click.chose","#adressResults tbody tr",function(e){$(e.target).not("input")&&$(this).find("[type=radio]").attr("checked","checked"),$(".new-societe:visible").fadeOut("medium",function(){$(this).find("li:visible").hide()})}).on("click.chose","#adressResults tfoot a, #adressResults tfoot [type=radio]",function(e){$(this).is("a")&&e.preventDefault(),$(".adress-list:visible").find(".new-societe").find("p").hide().end().find("li").each(function(e,t){$(t).find("input").val("").end().find("select :selected").removeAttr("selected"),0<=$.inArray($(t).data("input"),i.inputs[-1])?$(t).show():$(t).hide()}).end().show().end().fadeIn()}),$("#register_soc_pays_autocomplete").on("change",function(){$("#register_soc_type_activite").find("option").removeAttr("selected").filter(":eq(0)").attr("selected",!0).end().end().trigger("change.register")}),head.js({chosen:FG.env.ROOT_URL_STATIC+"/js/jquery/chosen.0.9.10.min.js"},function(){i.selects.filter(":visible").each(function(){var e=$(this);e.is(".chzn-done")?e.empty().trigger("liszt:updated"):e.chosen()}),$(".chzn-container:visible .chzn-search [type=text]").off("keyup.typing").on("keyup.typing",function(e){return!(36<=e.which&&40>=e.which)&&(i.chosenParent=$(".chzn-container:visible"),i.chosenParent.find(".chzn-results").empty(),i.chosenInput=$(e.target),i.selected=2==i.situation?$("#register_ecole"):$("#register_societe"),t.startTypingTimer())})})},startTypingTimer:function(){var e=this,t=e.params;null!==t.typingTimeout&&clearTimeout(t.typingTimeout),t.typingTimeout=setTimeout(function(){t.searchTerm=t.chosenInput.val();var i,n={searchTerm:t.searchTerm.toLowerCase(),limit:100};t.selected.is("#register_societe")?(i="/ajax/getListCompanies/",n.typeCompany=t.typeCompany=$("#register_soc_type_activite").val()):(i="/ajax/getListSchools/",n.typeCompany=0),3>t.searchTerm.length||t.chosenInput.is(":disabled")||(t.chosenInput.attr("disabled",!0),0<t.chosenParent.siblings(".loader-mini").length&&t.chosenParent.siblings(".loader-mini").removeClass("hidden"),t.selected.empty(),$.getJSON(i,n,function(i){if(!1!==i&&void 0!==i.data){var n,a,s=!1;if($.each(i.data,function(e,i){n=$("<option />").val(i.id),a="",0===t.typeCompany?a+=i.nom+" ("+i.cp+") ":a+=(void 0!==i.marque?"Marque : "+i.marque:i.nom)+" ("+i.nb_adresse+" "+FG.trad.adresses+" - "+i.nb_inscrits+" "+FG.trad.inscrits+") "+(void 0!==i.marque?" "+i.nom:""),n.text(a),void 0!==i.marque?(n.data("idsociete",i.id_societe),n.data("idmarque",i.id)):(n.data("idsociete",i.id),$.removeData(n,"idmarque")),i.nom.toLowerCase()!==t.searchTerm.toLowerCase()||s?t.selected.append(n):(s=!0,t.selected.prepend(n))}),!1===s){var o=t.searchTerm.toUpperCase();n=$("<option />").data("societe",o).text(o.toUpperCase()+" ("+FG.trad.nouvelle_societe+")"),t.selected.prepend(n)}t.chosenInput.val(t.searchTerm).closest("li").data("required",!0).attr("data-required",!0)}else{var o=t.searchTerm.toUpperCase();n=$("<option />").data("societe",o).text(o.toUpperCase()+" ("+FG.trad.nouvelle_societe+")"),t.selected.prepend(n)}t.selected.children("option:first").attr("selected",!0).end().trigger("liszt:updated"),$(".active-result","#register_societe_chzn, #register_ecole_chzn").highlight(t.searchTerm),e.showAdresses()}))},800)},showAdresses:function(){var e=this,t=e.params;head.ready("templating",function(){var i=t.selected.find(":selected"),n={type:t.situation},a=$("#adresses_"+t.situation);if(void 0!==i.data("societe"))return void e.showNewCompanyForm(1);if(void 0===i.data("idsociete"))return void(0<t.chosenParent.siblings(".loader-mini:visible").length&&t.chosenParent.siblings(".loader-mini:visible").addClass("hidden"));if(n.id=i.data("idsociete"),void 0!==i.data("idmarque")){var s=i.data("idmarque");$("[name=societe_id_marque]").val(s),n.idMarque=s}$.getJSON("/ajax/getInfoCompanySchool/",n,function(e){if(void 0!==e.info&&void 0!==e.adresse){var i=tmpl("tmpl_adressList",e);void 0!==$("#adressResults")&&(a.find(".new-societe:visible").hide().find("input").val(""),$("#adressResults").fadeOut(function(){$(this).remove()})),a.prepend($(i).show()).find("#adressResults").find("tbody input").first().attr("checked",!0).end().end().removeClass("hidden").end().fadeIn()}t.chosenInput.val(t.searchTerm).removeAttr("disabled").focus().closest("li").data("required",!0).attr("data-required",!0),0<t.chosenParent.siblings(".loader-mini:visible").length&&t.chosenParent.siblings(".loader-mini:visible").addClass("hidden"),FG.Utils.Tip.updatePositions()})})},showNewCompanyForm:function(e){var t=this,i=t.params;0<$("#adressResults").length&&$("#adressResults").fadeOut(function(){$(this).remove()}),i.chosenInput.val(i.searchTerm).removeAttr("disabled").focus().closest("li").removeAttr("data-required").removeData("required"),$("#adresses_"+i.situation).find("p").hide().filter(".type_"+i.typeCompany).show().end().end().find("li").each(function(e,t){0<=$.inArray($(t).data("input"),i.inputs[i.typeCompany])?$(t).show():$(t).hide().val("")}).end().find(".new-societe").show().end().fadeIn(function(){$(this).find('[name="soc_societe"], [name="nom_etabl"]').val(i.chosenInput.val())}),void 0!==e&&e||i.selected.removeAttr("required").empty().trigger("liszt:updated"),0<i.chosenParent.siblings(".loader-mini").length&&i.chosenParent.siblings(".loader-mini").addClass("hidden"),FG.Utils.Tip.updatePositions()}},$.abovethefold=function(e){var t=1.5*screen.height+$(window).scrollTop();return 0!==e.offset().top&&t>=e.offset().top},FG.Utils.Fold={params:{foldPosition:$(window).scrollTop(),functions:[],timeout:null},init:function(){var e=this,t=e.params,i=function(){!1!==$.typeOf(t.timeout)&&(clearTimeout(t.timeout),t.timeout=null)};$(window).on("scroll.fold",function(n){$.inArray(i,t.functions)<0&&e.pushFunction(i);var a=$(window).scrollTop();if($(document).height()-$(window).height()==a){if(t.functions.length<2)return;!1===$.typeOf(t.timeout)&&(t.timeout=setTimeout(function(){return e.delayedScroll()},500))}}),setTimeout(function(){$(window).trigger("scroll.fold")},300),$(function(){$(".ui-tabs-nav").on("mouseup",function(){var t=$(this);setTimeout(function(){e.show(t.siblings(".ui-tabs-panel:visible").find("li figure").first())},300)});var t=$("body");0<t.find(".ui-widget-overlay").length&&t.find(".ui-widget-overlay").css("height",t.outerHeight())})},delayedScroll:function(){var e=this,t=e.params,i=$(window);i.scrollTop()<t.tmpScrollTop||(t.foldPosition=i.scrollTop(),e.update())},pushFunction:function(e){"function"===$.typeOf(e)&&this.params.functions.push(e)},update:function(){var e=this,t=e.params;0<t.functions.length&&$.each(t.functions,function(e,t){"function"===$.typeOf(t)&&t()})}},FG.Utils.Fold.init(),FG.Utils.Zoom={params:{instance:null,_img:null,zEvent:null,zoom:$('<div id="zoom" />'),zoomPadding:50},init:function(e){var t=this
;return $.extend(!0,t.params,e),t.bindEvents()},getPositions:function(e,t){var i=this.params,n=i.zEvent,a=$(window),s={};(a.width()-200)/2<parseInt(n.pageX-209,10)?s.left=a.width()/40:s.left=a.width()-(e+a.width()/40);var o=a.height()+a.scrollTop();return o-10<parseInt(n.pageY+t/2,10)?s.top=parseInt(o-t,10)-10:a.scrollTop()+10>parseInt(n.pageY-t/2,10)?s.top=a.scrollTop()+10:s.top=n.pageY-t/2,s},drawZoom:function(e){var t=FG.Utils.Zoom,i=t.params;if($("#zoom").remove(),$(".zoom-hover").length>0){var n=$(".zoom-hover").first(),a=void 0!==n.data("zwidth")?n.data("zwidth"):i.img.width,s=void 0!==n.data("zheight")?n.data("zheight"):i.img.height,o=t.getPositions(parseInt(a+i.zoomPadding,10),parseInt(s+i.zoomPadding,10));i.instance.addClass("shadow").css({top:o.top+"px",left:o.left+"px",width:a,height:s}),!0===e&&(i.instance.append(i._img),$("body").append(i.instance),n.removeAttr("style"))}},bindEvents:function(){var e,t=this,i=t.params;$("#page").on("mouseenter.zoom","#event .photo",function(t){clearTimeout(e);var n=$(this);void 0!==n.data("zoom")&&""!==n.data("zoom")&&(n.css({cursor:"wait"}).addClass("zoom-hover"),void 0!==n.data("hashd")&&""!==n.data("hashd")&&n.addClass("zoom-hd"),i.zEvent=t,i.instance=i.zoom.clone(),i.img=new Image,i.img.src=n.data("zoom"),i._img=$(i.img),i._img.one("load",function(){FG.Utils.Zoom.drawZoom(!0)}).each(function(){"function"==typeof ga&&ga("send","event","gallery","hover","Aperçu photo"),this.complete&&$(this).load()}))}).on("mouseleave","#event .photo",function(){$(".zoom-hover").removeAttr("style").removeClass("zoom-hover").off("mouseenter.zoom",".photo img"),e=setTimeout(function(){null!==i.instance&&i.instance.remove(),i._img=null},500)})}},"undefined"!=typeof head&&head.ready("utils").ready("jQueryUI",function(){FG.Utils.Zoom.init()}),FG.Utils.EventZoom={params:{},init:function(e){var t=this;$.extend(!0,t.params,e),$("#page").off("click.zoom","#event .zoom-hd").on("click.zoom","#event .zoom-hd",function(e){if(!1===FG.user.connected)return $("#zoom").remove(),void head.js(FG.env.ROOT_URL_STATIC+"/js/parse-template"+FG.env.suffix_JS+".js",function(e){FG.Utils.Dialog.open({ui:{title:FG.trad.acces_reserve,noButton:!0},html:parseTemplate($("#tmpl_loginDialog").html(),{})})});var i=$(this);FG.Utils.Loader.show(),$.ajax({type:"POST",dataType:"JSON",url:FG.env.host+"ajax/getGalerieZoom/",data:{idMedia:i.data("idmedia"),idGalerie:i.data("idgalerie"),photo:i.data("photo")},success:function(i){if(i&&void 0!==i){var n=$("<div />").attr("id","zoomm").css({height:$(window).height()}).append('<div class="layer"></div>').appendTo($("body")),a=$(window);$("<img />").attr("src",i).css({width:a.width(),opacity:0}).appendTo(n).bind("contextmenu",function(e){e.preventDefault(),t.hideZoom(n)}).bind("error",function(){$(this).removeAttr("style"),n.remove(),FG.Utils.Loader.hide()}).one("load",function(){var i=this,s=$(this);t.positionLargeZoom(i,n,e),n.append($("<span />").addClass("close").click(function(){t.hideZoom(n)})),FG.Utils.Loader.hide(),s.css({height:i.naturalHeight*(i.width/i.naturalWidth),opacity:1}).mousemove(function(e){this.height>$(window).height()&&t.positionLargeZoom(this,n,e)}),a.bind("resize.zoom",function(){var e=$(this),t=e.width(),a=e.height();s.css({width:t,height:i.naturalHeight*(t/i.naturalWidth)}),n.css("height",a);var o=s.offset().top+i.height-(a+e.scrollTop());o<0&&s.css("top",parseInt(i.style.top,10)-o)}),$("body").addClass("overlaid").on("keydown.typing",function(e){if(e.preventDefault(),e.stopPropagation(),-1<$.inArray(e.which,[8,27]))return t.hideZoom(n),!1})}).each(function(){"function"==typeof ga&&ga("send","event","gallery","click","Affichage photo HD"),this.complete&&$(this).load()}),n.on("click.hideZoom",function(){t.hideZoom($(this))})}else FG.Utils.Loader.hide()},error:function(){FG.Utils.Loader.hide()}})})},positionZoom:function(e,t,i){var n=t.offset(),a=i.pageY-n.top,s=i.pageX-n.left,o=t.outerHeight(),r=t.outerWidth(),l=(e.height-o)/o,d=(e.width-r)/r;a>o?a=o:a<0&&(a=0),s>r?s=r:s<0&&(s=0),e.style.top=a*-l+"px",e.style.left=s*-d+"px"},positionLargeZoom:function(e,t,i){var n=t.offset(),a=i.pageY-n.top,s=t.outerHeight(),o=(e.height-s)/s;a>s?a=s:a<0&&(a=0),e.style.top=a*-o+"px"},hideZoom:function(e){e.hide().remove(),$("body").removeClass("overlaid").off("keydown.typing"),$(window).unbind("resize.zoom")}},FG.Utils.AA={params:{_tags:$("section [rel='tag']")},listen:function(){var e=this,t=e.params,i=[];$.each(t._tags,function(e,t){var n=$(t);0<n.siblings(".picto-add-tag").length?i.push(n.siblings(".picto-add-tag")):0<n.find(".picto-add-tag").length&&i.push(n.find(".picto-add-tag"))}),0<i.length&&$.each(i,function(t,i){$(i).click(function(t){return t.preventDefault(),t.stopPropagation(),e.onClick($(this).parent()),!1})})},onClick:function(e){null!==FG.user.premium&&FG.user.premium?$.ajax({type:"POST",dataType:"JSON",url:"/tags/addAAPremium/",data:{idTag:e.data("idtag")},success:function(e){FG.Utils.Tools.AJAXReturn(e)&&("function"==typeof ga&&ga("send","event","Agent d'alerte Tag","inscription","AA Tag"),FG.Utils.Dialog.open({ui:{title:FG.trad.premium_dialog_title,dialogClass:"dialog-premium"},html:FG.trad.premium_ajout_aa_succes}))}}):head.js(FG.env.ROOT_URL_STATIC+"/js/parse-template"+FG.env.suffix_JS+".js",function(){FG.Utils.Dialog.open({ui:{title:FG.trad.premium_dialog_title,dialogClass:"dialog-premium"},html:parseTemplate($("#tmpl_premiumDialog").html(),{})})})}},FG.Utils.Tools={AJAXReturn:function(e,t,i){if(!1===e||!1!==$.typeOf(e.errors)&&e.errors.length>0){var n="",a={title:FG.trad.erreur_survenue,dialogClass:"dialog-error"};if(!1!==$.typeOf(e.errors)){if(!1!==$.typeOf(e.errors[0])&&"force_reload"==e.errors[0])return window.location.reload(),!1;$.each(e.errors,function(e,t){t in FG.trad?n+="- "+FG.trad[t]+"<br />":n+="- "+t+"<br />"})}else n+=FG.trad.erreur_survenue;return"function"==typeof t&&(a.close=t),FG.Utils.Loader.hide(),"boolean"==$.typeOf(i)&&i||FG.Utils.Dialog.open({ui:a,html:n}),!1}return!0},AJAXError:function(){this.AJAXReturn({errors:[FG.trad.erreur_survenue]})}},"undefined"!=typeof head&&(head.ready("jQueryUI",function(){$.extend($.ui.dialog.prototype.options.position,{collision:"none"}),$("body").is(".ie7")&&($.each($(".table"),function(e,t){var i=$(this),n=$("<table><tr><td></td></tr></table>");void 0!==i.attr("class")&&(n.addClass(i.attr("class")),i.removeAttr("class")),n.find("td").append(i.clone(!0)),i.replaceWith(n.removeClass("table"))}),$('.side-column [class^="picto"]').remove()),$(".box-fold > .pointer, .accordeonMenu > .pointer").each(function(e,t){$(t).parent().bind("mouseenter mouseleave",function(e){var t=$(this);0<t.find(".inner, .menu-inner").length&&("mouseenter"===e.type?t.data("timeout",setTimeout(function(){t.find(".inner:hidden, .menu-inner:hidden").slideDown("medium")},400)):(clearTimeout(t.data("timeout")),t.find(".inner:visible, .menu-inner:visible").slideUp("fast")))})}),$(".tabbed-feed h2").hover(function(){var e=$(this);if(0<e.siblings(".line").length){e.closest(".tabbed-feed").find(".line:visible").hide();var t=e.next(".line");t.is(":hidden")?t.show():t.hide()}}),$("#select-lang").on("change",function(e){e.preventDefault();var t=$.trim($(this).val());""!==t&&void 0!==FG.env.host&&$(location).attr({href:FG.env.host+"redirect/lang/"+t+".html"})}),$("body").on("focus",".input-login",function(){var e=$(this);FG.trad.votre_email===e.val()&&e.val("")}).on("blur",".input-login",function(){var e=$(this);""===e.val()&&e.val(FG.trad.votre_email)}).on("focus",".input-username",function(){var e=$(this);FG.trad.user_name===e.val()&&e.val("")}).on("blur",".input-username",function(){var e=$(this);""===e.val()&&e.val(FG.trad.user_name)}).on("focus",".input-pass",function(){var e=$(this),t=e.nextAll(".input-pass-hidden").first();e.hide(),t.removeClass("hidden").show(),setTimeout(function(){t.focus()},200)}).on("blur",".input-pass-hidden",function(){var e=$(this);""===$.trim(e.val())&&e.hide().addClass("hidden").prev(".input-pass").show()}),$("body").on("focus",".jAutocomplete",function(){var e,t=$(this);e=FG.env.host.indexOf("admin",0)>-1?"http://admin.fashiongroup"+FG.env.EXTENSION_COM+"/admin/ajax.php?action=autocomplete":FG.env.host+"ajax/autocomplete/?";var i,n,a,s;i=n=a=s="",!1!==$.typeOf(t.data("for"))?!1===$.typeOf(t.data("site"))?i="&site="+t.data("for"):(!1!==$.typeOf(t.data("site"))&&(i="&site="+t.data("site")),n="&for="+t.data("for")):!1!==$.typeOf(t.data("site"))&&(i="&site="+t.data("site")),!1!==$.typeOf(t.data("service"))&&(a="&service="+t.data("service")),!1!==$.typeOf(t.data("idtype"))&&(s="&type="+t.data("idtype")),t.autocomplete({source:e+i+n+a+s,minLength:3,delay:500,select:function(e,i){return e.preventDefault(),e.stopPropagation(),t.val(i.item.label).blur(),void 0!==i.item.value&&""!==i.item.value&&void 0!==i.item.label&&i.item.label!==i.item.value?$(location).attr({href:i.item.value}):(!1!==$.typeOf(t.data("field"))&&(void 0!==($field=$("#"+t.data("field")+"_"+i.item.id))&&"checkbox"===$field.prop("type")&&$field.prop("checked","checked").trigger("change"),$("#"+t.data("field")).val(i.item.id),void 0!==i.item.id_parent&&$("#"+t.data("field")).attr("name",t.data("field")+"["+i.item.id_parent+"][]")),!1)},open:function(e,t){head.ready("jHighlight",function(){$(".ui-autocomplete:visible").highlight($(e.target).val()).css({zIndex:100})})}})}).closest("form").on("submit",function(){$(this).find("input").first().autocomplete("destroy")})}),$("#premiumGetCredits").on("click",function(){$(".dialog-premium").dialog("destroy"),FG.Utils.Loader.show(),$(location).attr({href:FG.env.host+"premium/"})}),head.ready("mailCheck",function(){var e,t=function(e){var t=$(e);if(!(t.closest(".ajax-login-form").length>0)){var i=t.closest(".js-form-group");t.mailcheck({domains:FG.env.domaineMail,suggested:function(e,n){var a=$('<span class="label label--warning" />').text(FG.trad.did_you_mean.replace("$1",n.full)).append('&nbsp;&nbsp;<button class="btn btn--small ok">'+FG.trad.yes+"</button>").append('&nbsp;&nbsp;<button class="btn btn--small nok"> '+FG.trad.no+"</button>");if(t.closest(".form-columned").length>0){if(i.next(".suggest").length>0)return i.next(".suggest").data("suggestion",n.full).empty().append(a),void(i.closest(".form").is(".form--horizontal")&&a.before("<label>&nbsp;</label>"));var s=$('<div class="form-group form-group--suggestion suggest line js-form-group" />').css("display","none");i.closest(".form").is(".form--horizontal")&&s.append("<label>&nbsp;</label>"),i.after(s.data("for",t).data("suggestion",n.full).append(a).fadeIn())}else{if(t.next(".suggest").length>0)return t.next(".suggest").data("suggestion",n.full).empty().append(a),void(i.closest(".form").is(".form--horizontal")&&a.before("<label>&nbsp;</label>"));t.after($('<div class="form-group form-group--suggestion suggest pointer js-form-group" />').data("for",t).data("suggestion",n.full).css("display","none").append(a).fadeIn())}},empty:function(){i.next(".suggest").length>0&&i.next(".suggest").remove()}})}};$("body").delegate('input.email, [type="email"]',"keyup",function(){if(!(void 0===FG.env.domaineMail||1>FG.env.domaineMail.length)){!1!==$.typeOf(e)&&clearTimeout(e);var i=this;e=setTimeout(function(){return t(i)},300)}}),$("#page, #main_content").on("mouseenter",".suggest",function(){var e=$(this);e.find("button").data("for",e.data("for")).data("suggestion",e.data("suggestion")).off("click.choose").on("click.choose",function(t){t.preventDefault(),t.stopPropagation();var i=$(this),n=i.data("for");i.is(".ok")?n.val(i.data("suggestion")).trigger("blur"):n.focus(),e.fadeOut("fast").remove()})})})),head.ready("jQueryUI",function(){$.datepicker=$.extend($.datepicker,{loadRegional:function(e,t){head.js(FG.env.ROOT_URL_STATIC+"/js/jquery/ui/i18n/jquery.ui.i18n.all"+FG.env.suffix_JS+".js",function(){var i="";switch(e){case"zh":i="zh-CN";break;case"pt":i="pt-BR";break;default:i=e}void 0===$.datepicker.regional[i]&&(i=""),$.datepicker.setDefaults($.datepicker.regional[i]),t(i)})}}),$.fn.selectRange=function(e,t){return t||(t=e),this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(e,t);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}})}}),"undefined"==typeof console&&(console={log:function(){}}),FG.Utils.FileUtils={humanFileSize:function(e,t){var i=t?1e3:1024;if(e<i)return e+" B";var n=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1;do{e/=i,++a}while(e>=i);return e.toFixed(1)+" "+n[a]}},FG.Utils.Number={DECIMAL:1,CURRENCY:2,defaults:{locale:"fr_FR",format:this.DECIMAL,currency:"EUR"},regional:{default_format:{decimals:2,dec_point:".",thousands_sep:",",currency_txt:"€",currency_pos:1,currency_space:""},en_IN:{currency_space:" "},en_BE:{dec_point:",",thousands_sep:".",currency_pos:2,currency_space:" "},en_ZA:{dec_point:",",thousands_sep:" "},fr:{dec_point:",",thousands_sep:" ",currency_txt:"€",currency_pos:2,currency_space:" "},fr_BE:{thousands_sep:"."},fr_CH:{dec_point:".",thousands_sep:"'",currency_pos:1},fr_LU:{thousands_sep:"."},es:{dec_point:",",thousands_sep:" ",currency_pos:2,currency_space:" "},es_AR:{thousands_sep:".",currency_pos:1,currency_space:""},es_BO:{thousands_sep:".",currency_pos:1,currency_space:""},es_CL:{thousands_sep:".",currency_pos:1,currency_space:""},es_CO:{thousands_sep:".",currency_pos:1,currency_space:""},es_CR:{thousands_sep:".",currency_pos:1,currency_space:""},es_EC:{thousands_sep:".",currency_pos:1,currency_space:""},es_GT:{dec_point:".",thousands_sep:",",currency_pos:1,currency_space:""},es_MX:{dec_point:".",thousands_sep:",",currency_pos:1,currency_space:""},es_PA:{dec_point:".",thousands_sep:",",currency_pos:1,currency_space:""},es_PE:{dec_point:".",thousands_sep:",",currency_pos:1,currency_space:""},es_PY:{thousands_sep:".",currency_pos:1,currency_space:" "},es_UY:{thousands_sep:".",currency_pos:1,currency_space:" "},es_VE:{thousands_sep:".",currency_pos:1,currency_space:""},de:{dec_point:",",thousands_sep:".",currency_pos:2,currency_space:" "},de_AT:{currency_pos:1},de_CH:{dec_point:".",thousands_sep:"'",currency_pos:1},de_LI:{dec_point:".",thousands_sep:"'",currency_pos:1},it:{dec_point:",",thousands_sep:".",currency_pos:2,currency_space:" "},it_CH:{dec_point:".",thousands_sep:"'",currency_pos:1},zh:{currency_space:" "},zh_HK:{currency_space:""},zh_TW:{currency_space:""},nl:{dec_point:",",thousands_sep:".",currency_pos:1,currency_space:" "},nl_BE:{currency_pos:2},ru:{dec_point:",",thousands_sep:" ",currency_txt:"€",currency_pos:2,currency_space:" "},pt:{thousands_sep:".",currency_pos:1},pt_PT:{dec_point:",",thousands_sep:" ",currency_pos:2,currency_space:" "},tr:{dec_point:",",thousands_sep:".",currency_pos:2,currency_space:" "},tr_TR:{currency_pos:1,currency_space:""}}},FG.Utils.Select2={flag:function(e){var t=e.element,i=$(t).data("flag");return!e.id||i.length<=0?e.text:'<span class="flag-'+i+'"></span> '+e.text},init:function(e){var t={formatResult:FG.Utils.Select2.flag,formatSelection:FG.Utils.Select2.flag,escapeMarkup:function(e){return e}};void 0===e&&(e=".select2"),$("body").hasClass("ie7")||$.each($(e),function(e,i){var n=$(i),a={minimumResultsForSearch:n.data("search-mini")};n.data("flag")&&1==n.data("flag")&&$.extend(a,t),n.select2(a),n.trigger("select2ify")})}},head.ready("number",function(){var e=function(e,t,i){if(void 0===$.number)return e;var n=$.extend({},FG.Utils.Number.defaults);void 0!==i&&(n.locale=i),void 0!==t&&t>0&&t<3&&(n.format=t);var a=n.locale.split("_"),s=a[0],o=void 0!==a[1]?a[1]:"",r=$.extend({},FG.Utils.Number.regional.default_format);void 0!==FG.Utils.Number.regional[s]&&$.extend(r,FG.Utils.Number.regional[s]),""!=o&&void 0!==FG.Utils.Number.regional[n.locale]&&$.extend(r,FG.Utils.Number.regional[n.locale]);var l="",d="";return FG.Utils.Number.CURRENCY==n.format&&(1==r.currency_pos?l=r.currency_txt+r.currency_space:d=r.currency_space+r.currency_txt),l+$.number(e,r.decimals,r.dec_point,r.thousands_sep)+d};$.extend(FG.Utils.Number,FG.Utils.Number,{formatI18n:e})});